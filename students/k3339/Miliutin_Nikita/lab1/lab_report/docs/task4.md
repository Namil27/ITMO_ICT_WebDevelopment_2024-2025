# Задание 4. Реализация многопользовательского чата

## Требования
- Реализовать двухпользовательский или многопользовательский чат (для максимального количества баллов — многопользовательский).
- Обязательно использовать библиотеку `socket`.
- Для многопользовательского чата необходимо использовать библиотеку `threading`.
- Реализация по протоколу TCP — 100% баллов.
- Для TCP нужно обрабатывать клиентские подключения и сообщения от всех пользователей в потоках и хранить список пользователей для рассылки сообщений.

## Как выполнялось задание
Для выполнения задания был разработан многопользовательский чат с клиентской и серверной частями на Python.

Серверная часть:
- Создан TCP-сокет, который слушает подключение на `localhost` и порту `9090`.
- Каждое новое подключение обрабатывается в отдельном потоке с помощью класса `ClientConnection`.
- Сервер хранит список всех подключённых клиентов и историю сообщений.
- При получении сообщения от одного клиента сервер отправляет его всем остальным с помощью метода `broadcast_mes`.
- Использование `threading.Lock` обеспечивает корректную работу с общими ресурсами (списком клиентов, историей).

Клиентская часть:
- Клиент при запуске подключается к серверу, вводит имя и регистрируется.
- Для одновременного получения сообщений и ввода сообщений используются два потока: 
  — поток прослушивания входящих сообщений;  
  — поток отправки сообщений (пользователь вводит текст в консоль).
- При получении сообщений клиент сохраняет их в указанный файл (для удобства логирования).
- Реализована корректная обработка отключения клиента командой `exit`.

Протокол:
- Вся коммуникация организована по TCP, что гарантирует доставку и порядок сообщений.
- Для идентификации пользователя при подключении сервер отправляет специальный JSON-запрос имени (`REG_NAME`), а клиент отвечает своим именем.

Таким образом был создан полноценный многопользовательский чат, который позволяет нескольким клиентам одновременно подключаться к серверу, обмениваться сообщениями, а сервер — рассылать эти сообщения всем пользователям. 

## Вывод
В результате выполнения задания был разработан многопользовательский чат по протоколу TCP с использованием `socket` и `threading`. Реализованы одновременный ввод/вывод сообщений у клиентов, многопоточная обработка подключений на сервере и рассылка сообщений всем пользователям.
